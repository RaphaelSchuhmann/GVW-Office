<script>
    import { onMount } from "svelte";
    import { ensureUserData } from "../services/generalService";

    import ToastStack from "../components/ToastStack.svelte";
    import Sidebar from "../components/Sidebar.svelte";
    import PageHeader from "../components/PageHeader.svelte";
    import SettingsModal from "../components/SettingsModal.svelte";

    /** @type {import("../components/SettingsModal.svelte").default} */
    let settingsModal;

    onMount(async () => {
        await ensureUserData();
    });

    function settingsClick() {
        settingsModal.showModal();
    }
</script>

<SettingsModal bind:this={settingsModal}></SettingsModal>
<ToastStack></ToastStack>
<main class="flex overflow-hidden">
    <Sidebar onSettingsClick={settingsClick} currentPage="currentPage"></Sidebar>
    <div class="flex flex-col w-full flex-1 overflow-hidden p-10 min-h-0">
        <PageHeader title="PageTitle" subTitle="Page Subtitle" />
        <!-- Allows for scrollable content -->
        <div class="flex-1 min-h-0 overflow-y-auto mt-5">
        </div>
    </div>
</main>